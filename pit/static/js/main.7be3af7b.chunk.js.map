{"version":3,"sources":["components/Header.tsx","components/Drift_Marker.tsx","components/DriftMarker.tsx","services/MockEncounterService.ts","components/EncounterDialog.tsx","services/MockMapService.ts","services/GraphBuilder.ts","models/Queue.ts","pages/OverheadMap.tsx","components/StatisticsBlock.tsx","pages/HeroProfile.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["useStyles","makeStyles","appHeader","backgroundColor","minHeight","display","flexDirection","alignItems","justifyContent","fontSize","color","headerSpan","width","headerText","fontFamily","headerParty","position","zIndex","right","top","headerImg","height","border","borderRadius","borderWidth","borderColor","margin","appLogo","pointerEvents","padding","Header","props","classes","className","src","alt","href","window","exports","Leaflet_module","L","require","Drift_Marker","_slideToUntil","_slideToDuration","_slideToLatLng","_slideFromLatLng","_slideKeepAtCenter","_slideDraggingWasAllowed","_slideFrame","addInitHook","on","slideCancel","slideTo","latlng","options","_map","duration","performance","now","getLatLng","keepAtCenter","undefined","dragging","enabled","disable","doubleClickZoom","touchZoom","scrollWheelZoom","fire","_slideTo","remaining","setLatLng","enable","startPoint","latLngToContainerPoint","endPoint","percentDone","currPoint","multiplyBy","add","currLatLng","containerPointToLatLng","panTo","animate","Util","requestAnimFrame","cancelAnimFrame","this","Marker","DriftMarker","onMoveEndCallback","el","getOptions","onMoveEnd","moveEnd","contextValue","leaflet","popupContainer","fromProps","toProps","leafletElement","icon","setIcon","zIndexOffset","setZIndexOffset","opacity","setOpacity","draggable","children","value","MapLayer","withLeaflet","MockEncounterService","currentStory","currentId","currentTitle","id","console","log","Story","TheInterceptContent","commonRoomContent","continue","choiceId","ChooseChoiceIndex","canContinue","paragraphText","Continue","encounterChoices","currentChoices","map","c","index","text","title","choices","dialog","background","content","minWidth","actions","EncounterDialog","encChoices","onClose","result","encounterId","useState","encounterService","paragraph","setParagraph","setTitle","setChoices","storyStarted","setStoryStarted","open","handleChoice","ev","Number","parseInt","currentTarget","encounter","chooseChoice","handleContinue","useEffect","startEncounter","error","Dialog","aria-labelledby","DialogContent","DialogActions","length","Button","onClick","toString","MockMapService","vertices","latLng","clickRadius","edges","to","from","weight","GraphBuilder","mapData","outGraph","createGraph","i","item","addNode","addLink","Queue","_store","val","push","shift","RpgMap","initialPos","graph","setGraph","pos","setPos","currentVertex","setCurrentVertex","vertexQueue","setEncounterId","distance","x","y","latDist","lat","lngDist","lng","Math","sqrt","getVertices","forEachNode","n","handleMoveEnd","maker","targetVertex","pop","data","targetEncounterId","getMap","Build","loadMap","bounds","LatLngBounds","maxBounds","markerIcon","Icon","iconUrl","iconSize","iconAnchor","bullseyeIcon","Map","zoom","minZoom","maxZoom","e","match","vertex","findNearestVertex","path","npath","aStar","find","clear","nextVertex","zoomControl","TileLayer","url","v","renderVertexMarkers","StyledTableCell","withStyles","theme","head","palette","common","black","white","body","TableCell","StyledTableRow","root","action","hover","TableRow","createData","name","base","modifier","total","rows","table","StatisticsBlock","TableContainer","component","Paper","Table","aria-label","TableHead","align","TableBody","row","scope","characterGrid","gridTemplateColumns","gridAutoRows","sectionHeading","bannerContainer","itemContainer","close","left","filter","portrait","portraitImg","portraitItem","portraitItemHelm","portraitItemBreastplate","portraitItemGloves","portraitItemLegs","inventory","inventoryGrid","inlineSize","statistics","overflowY","gridRowEnd","statisticsBlock","HeroProfile","App","OverheadMap","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7be3af7b.chunk.js","sourcesContent":["import { makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles({\r\n    appHeader: {\r\n        backgroundColor: \"#282c34\",\r\n        minHeight: \"100px\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        fontSize: \"calc(10px + 2vmin)\",\r\n        color: \"white\",\r\n    },\r\n    headerSpan: {\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n    },\r\n    headerText: {\r\n        fontFamily: \"fantasy\",\r\n    },\r\n    headerParty: {\r\n        position: \"absolute\",\r\n        zIndex: 1000,\r\n        right: \"10px\",\r\n        top: \"30px\",\r\n    },\r\n    headerImg: {\r\n        width: \"90px\",\r\n        height: \"90px\",\r\n        border: \"solid\",\r\n        borderRadius: \"50%\",\r\n        borderWidth: \"10px\",\r\n        borderColor: \"#282c34\",\r\n        margin: \"4px\",\r\n    },\r\n    appLogo: {\r\n        height: \"70px\",\r\n        pointerEvents: \"none\",\r\n        padding: \"20px\",\r\n    },\r\n});\r\n\r\ntype HeaderProps = {};\r\n\r\nfunction Header(props: HeaderProps) {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <header className={classes.appHeader}>\r\n            <span className={classes.headerSpan}>\r\n                <img src=\"./volcano.svg\" className={classes.appLogo} alt=\"logo\" />\r\n                <p className={classes.headerText}>Tales from the Pit</p>\r\n                <span className={classes.headerParty}>\r\n                    <a href=\"/#/profile/1\">\r\n                        <img src=\"images/knight.jpg\" className={classes.headerImg} alt=\"profile\" />\r\n                    </a>\r\n                    <a href=\"/#/profile/2\">\r\n                        <img src=\"images/cleric.jpg\" className={classes.headerImg} alt=\"profile\" />\r\n                    </a>\r\n                    <a href=\"/#/profile/3\">\r\n                        <img src=\"images/rogue.jpg\" className={classes.headerImg} alt=\"profile\" />\r\n                    </a>\r\n                    <a href=\"/#/profile/4\">\r\n                        <img src=\"images/wizard.jpg\" className={classes.headerImg} alt=\"profile\" />\r\n                    </a>\r\n                </span>\r\n            </span>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;\r\n","import { Marker as LeafletMarker, LatLngExpression } from 'leaflet';\r\n\r\nif (typeof window.exports != 'object') {\r\n    //cdn usage on browsers without \"exports\" variable\r\n    window.exports = {}\r\n}\r\n\r\n// constructor type \r\ntype ConstMarker = new (...args: any[]) => LeafletMarker;\r\n// needed leaflet type\r\ntype LeafletType = {\r\n    Marker: ConstMarker,\r\n    Util: any\r\n}\r\ndeclare global {\r\n    interface Window {\r\n        Drift_Marker: any,\r\n        exports: Object,\r\n        L: LeafletType\r\n    }\r\n}\r\n\r\nlet Leaflet_module = window.L ? window.L : require(\"leaflet\") as LeafletType\r\n\r\ntype slideOptions = {\r\n    duration: number\r\n    keepAtCenter?: boolean\r\n}\r\n\r\nclass Drift_Marker extends Leaflet_module.Marker {\r\n\r\n    private _slideToUntil = 0\r\n    private _slideToDuration = 1000\r\n    private _slideToLatLng: LatLngExpression = [0, 0]\r\n    private _slideFromLatLng: LatLngExpression = [0, 0]\r\n    private _slideKeepAtCenter = false\r\n    private _slideDraggingWasAllowed = false\r\n    private _slideFrame = 0\r\n\r\n    addInitHook = () => {\r\n        this.on('move', this.slideCancel, this);\r\n    }\r\n\r\n    // ðŸ‚method slideTo(latlng: LatLng, options: Slide Options): this\r\n    // Moves this marker until `latlng`, like `setLatLng()`, but with a smooth\r\n    // sliding animation. Fires `movestart` and `moveend` events.\r\n    slideTo = (latlng: LatLngExpression, options: slideOptions) => {\r\n        if (!this._map) return;\r\n\r\n        this._slideToDuration = options.duration;\r\n        this._slideToUntil = performance.now() + options.duration;\r\n        this._slideFromLatLng = this.getLatLng();\r\n        this._slideToLatLng = latlng;\r\n        this._slideKeepAtCenter = !!options.keepAtCenter;\r\n        this._slideDraggingWasAllowed =\r\n            this._slideDraggingWasAllowed !== undefined ?\r\n                this._slideDraggingWasAllowed :\r\n                this._map.dragging.enabled();\r\n\r\n        if (this._slideKeepAtCenter) {\r\n            this._map.dragging.disable();\r\n            this._map.doubleClickZoom.disable();\r\n            this._map.options.touchZoom = 'center';\r\n            this._map.options.scrollWheelZoom = 'center';\r\n        }\r\n\r\n        this.fire('movestart');\r\n        this._slideTo();\r\n\r\n        return this;\r\n    }\r\n\r\n    // ðŸ‚method slideCancel(): this\r\n    // Cancels the sliding animation from `slideTo`, if applicable.\r\n    slideCancel() {\r\n        Leaflet_module.Util.cancelAnimFrame(this._slideFrame);\r\n    }\r\n\r\n    private _slideTo = () => {\r\n        if (!this._map) return;\r\n\r\n        var remaining = this._slideToUntil - performance.now();\r\n\r\n        if (remaining < 0) {\r\n            this.setLatLng(this._slideToLatLng);\r\n            this.fire('moveend');\r\n            if (this._slideDraggingWasAllowed) {\r\n                this._map.dragging.enable();\r\n                this._map.doubleClickZoom.enable();\r\n                this._map.options.touchZoom = true;\r\n                this._map.options.scrollWheelZoom = true;\r\n            }\r\n            this._slideDraggingWasAllowed = false;\r\n            return this;\r\n        }\r\n\r\n        var startPoint = this._map.latLngToContainerPoint(this._slideFromLatLng);\r\n        var endPoint = this._map.latLngToContainerPoint(this._slideToLatLng);\r\n        var percentDone = (this._slideToDuration - remaining) / this._slideToDuration;\r\n\r\n        var currPoint = endPoint.multiplyBy(percentDone).add(\r\n            startPoint.multiplyBy(1 - percentDone)\r\n        );\r\n        var currLatLng = this._map.containerPointToLatLng(currPoint)\r\n        this.setLatLng(currLatLng);\r\n\r\n        if (this._slideKeepAtCenter) {\r\n            this._map.panTo(currLatLng, { animate: false })\r\n        }\r\n\r\n        this._slideFrame = Leaflet_module.Util.requestAnimFrame(this._slideTo, this);\r\n    }\r\n\r\n}\r\n\r\nwindow.Drift_Marker = Drift_Marker\r\n\r\nexport default Drift_Marker;\r\n","import React from 'react'\r\nimport Drift_Marker from \"./Drift_Marker\" \r\nimport { Icon, DivIcon, LatLngExpression } from 'leaflet'\r\nimport { LeafletProvider, MapLayer, MapLayerProps, withLeaflet } from 'react-leaflet';\r\n\r\ntype LeafletElement = Drift_Marker\r\n\r\ntype DriftMarkerProps = {\r\n  icon?: Icon | DivIcon,\r\n  draggable?: boolean,\r\n  opacity?: number,\r\n  position: LatLngExpression,\r\n  duration: number,\r\n  keepAtCenter?: boolean,\r\n  zIndexOffset?: number,\r\n  onMoveEnd?: (name: DriftMarker) => void;\r\n} & MapLayerProps\r\n\r\nclass DriftMarker extends MapLayer<DriftMarkerProps, LeafletElement> {\r\n\r\n  private onMoveEndCallback?: (name: DriftMarker) => void;\r\n\r\n  createLeafletElement(props: DriftMarkerProps): LeafletElement {\r\n    const el = new Drift_Marker(props.position, this.getOptions(props));\r\n    this.onMoveEndCallback = props.onMoveEnd;\r\n    el.on('moveend', this.moveEnd);\r\n    this.contextValue = { ...props.leaflet, popupContainer: el }\r\n    return el\r\n  }\r\n\r\n  moveEnd() {\r\n    if (this.onMoveEndCallback) {\r\n      this.onMoveEndCallback(this);\r\n    }\r\n  }\r\n\r\n  updateLeafletElement(fromProps: DriftMarkerProps, toProps: DriftMarkerProps) {\r\n    if (toProps.position !== fromProps.position && typeof toProps.duration == 'number') {\r\n      this.leafletElement.slideTo(toProps.position, {\r\n        duration: toProps.duration,\r\n        keepAtCenter: toProps.keepAtCenter\r\n      })\r\n    }\r\n    if (toProps.icon !== fromProps.icon && toProps.icon) {\r\n      this.leafletElement.setIcon(toProps.icon)\r\n    }\r\n    if (toProps.zIndexOffset !== fromProps.zIndexOffset && toProps.zIndexOffset !== undefined) {\r\n      this.leafletElement.setZIndexOffset(toProps.zIndexOffset)\r\n    }\r\n    if (toProps.opacity !== fromProps.opacity && toProps.opacity !== undefined) {\r\n      this.leafletElement.setOpacity(toProps.opacity)\r\n    }\r\n    if (toProps.draggable !== fromProps.draggable && this.leafletElement.dragging !== undefined) {\r\n      if (toProps.draggable === true) {\r\n        this.leafletElement.dragging.enable()\r\n      } else {\r\n        this.leafletElement.dragging.disable()\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { children } = this.props\r\n\r\n    return children == null || this.contextValue == null ? null : (\r\n      <LeafletProvider value={this.contextValue}>\r\n        {children}\r\n      </LeafletProvider>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withLeaflet<DriftMarkerProps>(DriftMarker);\r\n\r\nexport {};\r\n","import { Choice } from \"inkjs/engine/Choice\";\r\nimport { Story } from \"inkjs/engine/Story\";\r\nimport EncounterStory from \"../models/EncounterStory\";\r\nimport EncounterChoice from \"../models/EncounterChoice\";\r\n\r\nimport TheInterceptContent from \"./TheIntercept.json\";\r\nimport commonRoomContent from \"./common-room.ink.json\";\r\n\r\n// A mock story service\r\n// Story state will be kept on the server\r\nexport class MockEncounterService {\r\n    private currentStory: Story | null = null;\r\n    private currentId: string | null = null;\r\n    private currentTitle: string = \"\";\r\n\r\n    public startEncounter(id: string): EncounterStory | null {\r\n        console.log(`Start encounter ${id}`);\r\n\r\n        switch (id) {\r\n            case \"hoard\":\r\n                this.currentTitle = \"Treasure !\";\r\n                this.currentStory = new Story(TheInterceptContent);\r\n                //paragraphText: \"You stumble tired and exhaused into a room stuffed to the ceiling with well-crafted wooden coffers.\",\r\n                break;\r\n            case \"wet-room\":\r\n                this.currentTitle = \"The Intercept !\";\r\n                this.currentStory = new Story(TheInterceptContent);\r\n                break;\r\n            case \"common-room\":\r\n                this.currentTitle = \"Tracking the yellow-bellied bastard\";\r\n                this.currentStory = new Story(commonRoomContent);\r\n                break;\r\n            default:\r\n                return null;\r\n        }\r\n        this.currentId = id;\r\n\r\n        return this.continue();\r\n    }\r\n\r\n    public chooseChoice(choiceId: number): EncounterStory | null {\r\n        if (!this.currentStory || !this.currentId) return null;\r\n        this.currentStory.ChooseChoiceIndex(choiceId);\r\n\r\n        return this.continue();\r\n    }\r\n\r\n    public continue(): EncounterStory | null {\r\n        if (!this.currentStory || !this.currentId) return null;\r\n\r\n        if (!this.currentStory.canContinue) {\r\n            return null; // ??\r\n        }\r\n\r\n        const paragraphText = this.currentStory.Continue();\r\n        if (!paragraphText) return null;\r\n\r\n        const encounterChoices: EncounterChoice[] = this.currentStory.currentChoices.map(\r\n            (c: Choice) =>\r\n                <EncounterChoice>{\r\n                    index: c.index,\r\n                    text: c.text,\r\n                }\r\n        );\r\n\r\n        const encounter: EncounterStory = {\r\n            id: this.currentId,\r\n            title: this.currentTitle,\r\n            paragraphText: paragraphText,\r\n            choices: encounterChoices,\r\n        };\r\n\r\n        return encounter;\r\n    }\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\n\r\nimport { Dialog, makeStyles } from \"@material-ui/core\";\r\n\r\nimport { MockEncounterService } from \"../services/MockEncounterService\";\r\nimport { Button, DialogActions, DialogContent } from \"@material-ui/core\";\r\nimport EncounterChoice from \"../models/EncounterChoice\";\r\n\r\nconst useStyles = makeStyles({\r\n    dialog: {\r\n        // backgroundImage: \"url(images/scroll.png)\"\r\n    },\r\n    background: {\r\n        position: \"absolute\",\r\n        opacity: 0.1,\r\n        right: \"20px\",\r\n    },\r\n    content: {\r\n        minWidth: \"520px\",\r\n        minHeight: \"460px\",\r\n        padding: \"40px\",\r\n        fontFamily: \"Martel\",\r\n    },\r\n    actions: {\r\n        padding: \"30px\",\r\n        //paddingBottom: \"100px\",\r\n        //paddingRight: \"80px\",\r\n    },\r\n});\r\n\r\ntype EncounterDialogProps = {\r\n    onClose: (val: number) => void;\r\n    result: number;\r\n    encounterId: string | undefined;\r\n};\r\n\r\nfunction EncounterDialog(props: EncounterDialogProps) {\r\n    const { onClose, result, encounterId } = props;\r\n\r\n    const [encounterService] = useState(new MockEncounterService());\r\n    let [paragraph, setParagraph] = useState(\"\");\r\n    let [title, setTitle] = useState(\"\");\r\n    let [choices, setChoices] = useState([] as EncounterChoice[]);\r\n    let [storyStarted, setStoryStarted] = useState(false);\r\n\r\n    const open: boolean = encounterId !== undefined;\r\n    const classes = useStyles();\r\n\r\n    const handleClose = () => {\r\n        setStoryStarted(false);\r\n        onClose(result);\r\n    };\r\n\r\n    const handleCloseClick = (value: any) => {\r\n        onClose(value);\r\n    };\r\n\r\n    const handleChoice = (ev: any) => {\r\n        const choiceId = Number.parseInt(ev.currentTarget.id);\r\n\r\n        // Tell the story where to go next\r\n        const encounter = encounterService.chooseChoice(choiceId);\r\n\r\n        if (encounter != null) {\r\n            console.log(`Selected ${choiceId} for ${encounter.id}`);\r\n\r\n            setParagraph(encounter.paragraphText);\r\n            setTitle(encounter.title);\r\n            setChoices(encounter.choices);\r\n        }\r\n\r\n        // TODO: How to finish?\r\n    };\r\n\r\n    const handleContinue = (ev: any) => {\r\n        const encounter = encounterService.continue();\r\n\r\n        if (encounter != null) {\r\n            setParagraph(encounter.paragraphText);\r\n            setChoices(encounter.choices);\r\n        } else {\r\n            // Finished/\r\n            onClose(0);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        // Initial load of map data\r\n        const startEncounter = () => {\r\n            if (!encounterId) return;\r\n\r\n            //console.log(`Encounter ${encounterId}`);\r\n\r\n            setStoryStarted(true);\r\n\r\n            const encounter = encounterService.startEncounter(encounterId);\r\n            if (!encounter) {\r\n                console.error(`No encounter data`);\r\n                return;\r\n            }\r\n            console.log(`Started ${encounter.id} encounter`);\r\n            setParagraph(encounter.paragraphText);\r\n            setTitle(encounter.title);\r\n            setChoices(encounter.choices);\r\n        };\r\n\r\n        // console.log(`useEffect2 ${encounterId} open=${open} storyStarted=${storyStarted}`);\r\n\r\n        if (open && !storyStarted) {\r\n            startEncounter();\r\n        }\r\n    }, [encounterId]);\r\n\r\n    const renderChoices = (encChoices: EncounterChoice[]) => {\r\n        if (encChoices.length == 0) {\r\n            return <Button onClick={handleContinue}>Continue</Button>;\r\n        }\r\n\r\n        return encChoices.map((c: EncounterChoice) => (\r\n            <Button id={c.index.toString()} key={c.index} onClick={handleChoice}>\r\n                {c.text}\r\n            </Button>\r\n        ));\r\n    };\r\n\r\n    return (\r\n        // className={classes.dialog}\r\n        <Dialog className={classes.dialog} onClose={handleClose} aria-labelledby=\"simple-dialog-title\" open={open}>\r\n            {/* <DialogTitle id=\"simple-dialog-title\">Set backup account</DialogTitle> */}\r\n            <DialogContent className={classes.content}>\r\n                <img className={classes.background} src=\"./images/chest.jpg\" />\r\n                <h1>{title}</h1>\r\n                <p>{paragraph}</p>\r\n            </DialogContent>\r\n            <DialogActions className={classes.actions}>{renderChoices(choices)}</DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n\r\nexport default EncounterDialog;\r\n","import { latLng } from \"leaflet\";\r\n\r\nimport MapData from \"../models/MapData\";\r\nimport MapEdge from \"../models/MapEdge\";\r\nimport MapVertex from \"../models/MapVertex\";\r\nimport IMapService from \"./IMapService\";\r\n\r\nexport class MockMapService implements IMapService {\r\n    public getMap(id: string): MapData | null {\r\n        const vertices: MapVertex[] = [\r\n            {\r\n                id: \"crypt\",\r\n                position: latLng([0.001417, 0.001295]),\r\n                clickRadius: 0.0006,\r\n            },\r\n            {\r\n                id: \"high-altar\",\r\n                position: latLng([0.002179, 0.002405]),\r\n                clickRadius: 0.0006,\r\n            },\r\n            {\r\n                id: \"high-altar-link\",\r\n                position: latLng([0.002741, 0.002102]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"inner-sanctum-corridor\",\r\n                position: latLng([0.002958, 0.00184]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"hoard\",\r\n                position: latLng([0.002563, 0.001255]),\r\n                clickRadius: 0.0006,\r\n                encounterId: \"hoard\",\r\n            },\r\n            {\r\n                id: \"oubliette\",\r\n                position: latLng([0.003278, 0.00222]),\r\n                clickRadius: 0.0006,\r\n            },\r\n            {\r\n                id: \"endless-stair\",\r\n                position: latLng([0.006014, 0.000879]),\r\n                clickRadius: 0.0006,\r\n            },\r\n            {\r\n                id: \"endless-stair-link\",\r\n                position: latLng([0.006566, 0.001201]),\r\n                clickRadius: 0.0003,\r\n            },\r\n            {\r\n                id: \"endless-stair-top\",\r\n                position: latLng([0.007221, 0.001684]),\r\n                clickRadius: 0.0003,\r\n            },\r\n            {\r\n                id: \"ruined-hideout-left\",\r\n                position: latLng([0.0061, 0.001804]),\r\n                clickRadius: 0.0006,\r\n            },\r\n            {\r\n                id: \"ruined-hideout-front\",\r\n                position: latLng([0.005703, 0.002436]),\r\n                clickRadius: 0.0006,\r\n            },\r\n            {\r\n                id: \"ruined-hideout-right\",\r\n                position: latLng([0.006143, 0.003107]),\r\n                clickRadius: 0.0006,\r\n            },\r\n            {\r\n                id: \"ruined-hideout-link\",\r\n                position: latLng([0.004934, 0.00345]),\r\n                clickRadius: 0.0004,\r\n            },\r\n            {\r\n                id: \"winding-stair-top\",\r\n                position: latLng([0.00458, 0.003903]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"winding-stair-mid2\",\r\n                position: latLng([0.004087, 0.004209]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"winding-stair-mid1\",\r\n                position: latLng([0.003556, 0.003871]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"winding-stair-bottom\",\r\n                position: latLng([0.002993, 0.004214]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"crossroads\",\r\n                position: latLng([0.002782, 0.004471]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"ante-chamber-link\",\r\n                position: latLng([0.002648, 0.004246]),\r\n                clickRadius: 0.0006,\r\n            },\r\n            {\r\n                id: \"ante-chamber\",\r\n                position: latLng([0.001305, 0.003606]),\r\n                clickRadius: 0.0006,\r\n            },\r\n            {\r\n                id: \"warrens-left\",\r\n                position: latLng([0.003531, 0.005465]),\r\n                clickRadius: 0.0006,\r\n                encounterId: \"warrens\",\r\n            },\r\n            {\r\n                id: \"warrens-mid\",\r\n                position: latLng([0.003193, 0.006307]),\r\n                clickRadius: 0.0006,\r\n            },\r\n            {\r\n                id: \"warrens-right-link\",\r\n                position: latLng([0.003128, 0.006897]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"warrens-right\",\r\n                position: latLng([0.003429, 0.007299]),\r\n                clickRadius: 0.0006,\r\n            },\r\n            {\r\n                id: \"warrens-link\",\r\n                position: latLng([0.002758, 0.006752]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"warrens-pool\",\r\n                position: latLng([0.00226, 0.007519]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"weeping-bridge-1\",\r\n                position: latLng([0.002388, 0.005069]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"weeping-bridge-2\",\r\n                position: latLng([0.002093, 0.005476]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"the-drop\",\r\n                position: latLng([0.001493, 0.00619]),\r\n                clickRadius: 0.0006,\r\n            },\r\n            {\r\n                id: \"dwarfs-landing\",\r\n                position: latLng([0.000951, 0.005605]),\r\n                clickRadius: 0.0006,\r\n            },\r\n            {\r\n                id: \"the-river\",\r\n                position: latLng([0.000404, 0.006227]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"bandit-lair-river\",\r\n                position: latLng([0.001134, 0.006723]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"bandit-lair-entry\",\r\n                position: latLng([0.000877, 0.007093]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"bandit-lair\",\r\n                position: latLng([0.00136, 0.007823]),\r\n                clickRadius: 0.0006,\r\n            },\r\n            {\r\n                id: \"fake-altar\",\r\n                position: latLng([0.005016, 0.004498]),\r\n                clickRadius: 0.0006,\r\n            },\r\n            {\r\n                id: \"the-chasm\",\r\n                position: latLng([0.005885, 0.005566]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"common-room\",\r\n                position: latLng([0.007509, 0.007118]),\r\n                clickRadius: 0.0006,\r\n                encounterId: \"common-room\",\r\n            },\r\n            {\r\n                id: \"wet-room\",\r\n                position: latLng([0.006855, 0.006271]),\r\n                clickRadius: 0.0006,\r\n                encounterId: \"wet-room\",\r\n            },\r\n            {\r\n                id: \"wet-room-link\",\r\n                position: latLng([0.00663, 0.006625]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"wine-cellar-link\",\r\n                position: latLng([0.006126, 0.006941]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"wine-cellar\",\r\n                position: latLng([0.005868, 0.007263]),\r\n                clickRadius: 0.0006,\r\n            },\r\n            {\r\n                id: \"secret-passage\",\r\n                position: latLng([0.00516, 0.006346]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"secret-passage-link\",\r\n                position: latLng([0.005568, 0.005798]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"common-room-link\",\r\n                position: latLng([0.008094, 0.006206]),\r\n                clickRadius: 0.0002,\r\n            },\r\n            {\r\n                id: \"store-room\",\r\n                position: latLng([0.007627, 0.005412]),\r\n                clickRadius: 0.0006,\r\n            },\r\n            {\r\n                id: \"hidey-hole\",\r\n                position: latLng([0.006732, 0.004988]),\r\n                clickRadius: 0.0004,\r\n            },\r\n            {\r\n                id: \"hidey-hole-link\",\r\n                position: latLng([0.006394, 0.0045]),\r\n                clickRadius: 0.0002,\r\n            },\r\n        ];\r\n\r\n        const edges: MapEdge[] = [\r\n            { to: \"crypt\", from: \"high-altar\", weight: 1.0 },\r\n            { to: \"high-altar\", from: \"ante-chamber\", weight: 1.0 },\r\n            { to: \"ante-chamber-link\", from: \"ante-chamber\", weight: 1.0 },\r\n            { to: \"high-altar\", from: \"high-altar-link\", weight: 1.0 },\r\n            { to: \"high-altar-link\", from: \"inner-sanctum-corridor\", weight: 1.0 },\r\n            { to: \"inner-sanctum-corridor\", from: \"hoard\", weight: 1.0 },\r\n            { to: \"inner-sanctum-corridor\", from: \"oubliette\", weight: 1.0 },\r\n            { to: \"endless-stair\", from: \"oubliette\", weight: 1.0 },\r\n            { to: \"endless-stair\", from: \"endless-stair-link\", weight: 1.0 },\r\n            { to: \"endless-stair-link\", from: \"endless-stair-top\", weight: 1.0 },\r\n            { to: \"endless-stair-link\", from: \"ruined-hideout-left\", weight: 1.0 },\r\n            { to: \"ruined-hideout-front\", from: \"ruined-hideout-left\", weight: 1.0 },\r\n            { to: \"ruined-hideout-front\", from: \"ruined-hideout-right\", weight: 1.0 },\r\n            { to: \"ruined-hideout-link\", from: \"ruined-hideout-front\", weight: 1.0 },\r\n            { to: \"ruined-hideout-link\", from: \"winding-stair-top\", weight: 1.0 },\r\n            { to: \"winding-stair-top\", from: \"winding-stair-mid2\", weight: 1.0 },\r\n            { to: \"winding-stair-mid2\", from: \"winding-stair-mid1\", weight: 1.0 },\r\n            { to: \"winding-stair-mid1\", from: \"winding-stair-bottom\", weight: 1.0 },\r\n            { to: \"winding-stair-bottom\", from: \"crossroads\", weight: 1.0 },\r\n            { to: \"ante-chamber-link\", from: \"crossroads\", weight: 1.0 },\r\n            { to: \"warrens-left\", from: \"crossroads\", weight: 1.0 },\r\n            { to: \"warrens-left\", from: \"warrens-mid\", weight: 1.0 },\r\n            { to: \"warrens-right-link\", from: \"warrens-mid\", weight: 1.0 },\r\n            { to: \"warrens-right-link\", from: \"warrens-right\", weight: 1.0 },\r\n            { to: \"warrens-link\", from: \"warrens-mid\", weight: 1.0 },\r\n            { to: \"warrens-link\", from: \"warrens-pool\", weight: 1.0 },\r\n            { to: \"crossroads\", from: \"weeping-bridge-1\", weight: 1.0 },\r\n            { to: \"weeping-bridge-1\", from: \"weeping-bridge-2\", weight: 1.0 },\r\n            { to: \"weeping-bridge-2\", from: \"the-drop\", weight: 1.0 },\r\n            { to: \"dwarfs-landing\", from: \"the-drop\", weight: 1.0 },\r\n            { to: \"the-river\", from: \"dwarfs-landing\", weight: 1.0 },\r\n            { to: \"bandit-lair-river\", from: \"the-drop\", weight: 1.0 },\r\n            { to: \"bandit-lair-river\", from: \"bandit-lair-entry\", weight: 1.0 },\r\n            { to: \"bandit-lair\", from: \"bandit-lair-entry\", weight: 1.0 },\r\n            { to: \"winding-stair-top\", from: \"fake-altar\", weight: 1.0 },\r\n            { to: \"the-chasm\", from: \"fake-altar\", weight: 1.0 },\r\n            // Inn link\r\n            { to: \"common-room\", from: \"wet-room\", weight: 1.0 },\r\n            { to: \"wet-room-link\", from: \"wet-room\", weight: 1.0 },\r\n            { to: \"wet-room-link\", from: \"wine-cellar-link\", weight: 1.0 },\r\n            { to: \"wine-cellar\", from: \"wine-cellar-link\", weight: 1.0 },\r\n            { to: \"wine-cellar\", from: \"secret-passage\", weight: 1.0 },\r\n            { to: \"secret-passage-link\", from: \"secret-passage\", weight: 1.0 },\r\n            { to: \"common-room\", from: \"common-room-link\", weight: 1.0 },\r\n            { to: \"store-room\", from: \"common-room-link\", weight: 1.0 },\r\n            { to: \"store-room\", from: \"hidey-hole\", weight: 1.0 },\r\n            { to: \"hidey-hole-link\", from: \"hidey-hole\", weight: 1.0 },\r\n        ];\r\n\r\n        const sample: MapData = {\r\n            id: id,\r\n            vertices: vertices,\r\n            edges: edges,\r\n        };\r\n        return sample;\r\n    }\r\n}\r\n","import createGraph from \"ngraph.graph\";\r\nimport MapData from \"../models/MapData\";\r\n\r\n/*\r\n  Convert the Map data DTO to an ngaph.graph object for pathfinding\r\n*/\r\nexport default class GraphBuilder {\r\n\r\n    public static Build(mapData: MapData): any {\r\n        \r\n        let outGraph = createGraph();\r\n\r\n        for (let i = 0; i < mapData.vertices.length; i++) {\r\n            const item = mapData.vertices[i];\r\n            outGraph.addNode(item.id, { position: item.position, clickRadius: item.clickRadius, encounterId: item.encounterId });\r\n        }\r\n\r\n        for (let i = 0; i < mapData.edges.length; i++) {\r\n            const item = mapData.edges[i];\r\n            outGraph.addLink(item.to, item.from, { weight: item.weight });\r\n        }\r\n\r\n        return outGraph;\r\n    }\r\n}","\r\nexport default class Queue<T> {\r\n  _store: T[] = [];\r\n  push(val: T) {\r\n    this._store.push(val);\r\n  }\r\n  pop(): T | undefined {\r\n    return this._store.shift();\r\n  }\r\n  clear() {\r\n      this._store = [];\r\n  }\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\n\r\n// UI Elements\r\nimport { Icon, latLng, LatLng, LatLngBounds } from 'leaflet';\r\nimport { Map, Marker, TileLayer } from 'react-leaflet';\r\nimport DriftMarker from '../components/DriftMarker';\r\nimport EncounterDialog from \"../components/EncounterDialog\";\r\n\r\n// Services\r\nimport { MockMapService } from '../services/MockMapService';\r\n\r\n// Pathfinding imports\r\nimport npath from 'ngraph.path';\r\nimport GraphBuilder from '../services/GraphBuilder';\r\nimport Queue from '../models/Queue';\r\n\r\nexport function RpgMap(props: any) {\r\n    // const pos = { lat: -51.505, lng: -0.09 } as any;\r\n    const initialPos = latLng([0.007497, 0.007118]);\r\n    const initialNode = \"common-room\";\r\n\r\n    let [graph, setGraph] = useState(null as any); // The map graph data\r\n    let [pos, setPos] = useState(initialPos); // The current (target) position of the player marker\r\n    let [currentVertex, setCurrentVertex] = useState(initialNode); // The current vertex that the player marker is at\r\n    let [vertexQueue] = useState(new Queue<any>()); // A queue of points to visit during path-finding\r\n    let [encounterId, setEncounterId] = useState(undefined as string | undefined);\r\n\r\n    // Calculates the distance between two points\r\n    const distance = (x: LatLng, y: LatLng): number => {\r\n        const latDist = x.lat - y.lat;\r\n        const lngDist = x.lng - y.lng;\r\n        return Math.sqrt(latDist * latDist + lngDist * lngDist);\r\n    };\r\n\r\n    // Build verticies from the graph\r\n    // TODO: Is there an easier method to use?\r\n    const getVertices = (graph: any): any[] => {\r\n        if (!graph) return [];\r\n\r\n        var vertices: any[] = [];\r\n        graph.forEachNode((n: any) => {\r\n            vertices.push(n);\r\n        });\r\n\r\n        return vertices;\r\n    };\r\n\r\n    // Get the vertex nearest to the clicked point\r\n    const findNearestVertex = (graph: any, pos: LatLng): any => {\r\n        const vertices = getVertices(graph);\r\n\r\n        for (let i = 0; i < vertices.length; i++) {\r\n            const vertex = vertices[i];\r\n\r\n            const dist = distance(pos, vertex.data[\"position\"]);\r\n            const isInRadius = dist < vertex.data[\"clickRadius\"];\r\n\r\n            if (isInRadius) {\r\n                return vertex;\r\n            }\r\n            // console.log(`Distance to ${vertex.id} is (${dist} < ${vertex.clickRadius}) = ${isInRadius}`);\r\n        }\r\n\r\n        return null;\r\n    };\r\n\r\n    // Fire when marker move has finished\r\n    const handleMoveEnd = (maker: any) => {\r\n        console.log(\"Move ended\");\r\n\r\n        var targetVertex = vertexQueue.pop();\r\n        if (targetVertex) {\r\n            console.log(`Next vertex ${targetVertex.id}`);\r\n\r\n            setPos(targetVertex.data[\"position\"]);\r\n            setCurrentVertex(targetVertex.id);\r\n\r\n            const targetEncounterId = targetVertex.data[\"encounterId\"];\r\n            if (targetEncounterId) {\r\n                setEncounterId(targetEncounterId);\r\n            }\r\n        }\r\n    };\r\n\r\n    // Fire when user clicks on the map\r\n    const handleClick = (e: any) => {\r\n        if (!graph) return; // Map not loaded\r\n\r\n        console.log(\"clicked at: \" + e.latlng);\r\n\r\n        // Move to the nearest vertex to the clicked point\r\n        const match = findNearestVertex(graph, e.latlng);\r\n\r\n        if (match) {\r\n            console.log(`Clicked on vertex ${match.id}`);\r\n\r\n            var pathFinder = npath.aStar(graph);\r\n            let path = pathFinder.find(currentVertex, match.id);\r\n\r\n            if (path.length <= 1) {\r\n                console.log(`No route found to ${match.id}`);\r\n                return;\r\n            }\r\n\r\n            path.pop(); // Remove the current/start node\r\n\r\n            vertexQueue.clear();\r\n            let nextVertex = path.pop();\r\n            while (nextVertex) {\r\n                vertexQueue.push(nextVertex);\r\n                nextVertex = path.pop();\r\n            }\r\n\r\n            handleMoveEnd(null); // Trigger the move to the next vertex\r\n        }\r\n    };\r\n\r\n    const handleEncounterClose = () => {\r\n        console.log(\"Close encounter\");\r\n        setEncounterId(undefined);\r\n    };\r\n\r\n    useEffect(() => {\r\n        // Initial load of map data\r\n        const loadMap = () => {\r\n            const service = new MockMapService();\r\n            const data = service.getMap(\"temple\");\r\n            if (!data) {\r\n                console.error(`No map data`);\r\n                return;\r\n            }\r\n            console.log(`Found ${data?.vertices.length} vertices`);\r\n            const graph = GraphBuilder.Build(data);\r\n            setGraph(graph);\r\n        };\r\n\r\n        if (graph == null) {\r\n            loadMap();\r\n        }\r\n    });\r\n\r\n    \r\n    const bounds = new LatLngBounds(latLng([0.0, 0.0]), latLng([0.009634, 0.009642]));\r\n    const maxBounds = new LatLngBounds(latLng([-0.0002, 0.0]), latLng([0.01025, 0.012]));\r\n\r\n    var markerIcon = new Icon({\r\n        iconUrl: \"images/marker.png\",\r\n        iconSize: [50, 75],\r\n        iconAnchor: [25, 65],\r\n        // popupAnchor: [-3, -76],\r\n        // shadowUrl: 'my-icon-shadow.png',\r\n        // shadowSize: [68, 95],\r\n        // shadowAnchor: [22, 94]\r\n    });\r\n\r\n    var bullseyeIcon = new Icon({\r\n        iconUrl: \"images/blank.svg\",\r\n        iconSize: [50, 50],\r\n        className: \"vertex-icon\",\r\n    });\r\n\r\n    const renderVertexMarkers = (graph: any) => {\r\n        const vertices: any[] = getVertices(graph);\r\n\r\n        for (let i = 0; i < vertices.length; i++) {\r\n            const v = vertices[i];\r\n            // console.log(`marker at ${v.data['position']} is ${v.id}`);\r\n        }\r\n\r\n        return vertices.map((v) => <Marker key={v.id} position={v.data[\"position\"]} title={v.id} icon={bullseyeIcon} />);\r\n    };\r\n\r\n    // maxBounds={bounds}\r\n    return (\r\n        <Map\r\n            zoom={18}\r\n            minZoom={18}\r\n            maxZoom={18}\r\n            bounds={bounds}\r\n            maxBounds={maxBounds}\r\n            scrollWheelZoom={false}\r\n            onClick={handleClick}\r\n            zoomControl={false}\r\n        >\r\n            <EncounterDialog onClose={handleEncounterClose} result={1} encounterId={encounterId} />\r\n            <TileLayer url=\"tiles/{z}/{x}/{y}.png\" bounds={bounds} />\r\n            <DriftMarker duration={1000} position={pos} keepAtCenter={false} icon={markerIcon} onMoveEnd={handleMoveEnd} />\r\n            {renderVertexMarkers(graph)}\r\n        </Map>\r\n    );\r\n}\r\n\r\nexport default RpgMap;\r\n","import React from \"react\";\r\nimport { withStyles, makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nconst StyledTableCell = withStyles((theme) => ({\r\n    head: {\r\n        fontFamily: \"Martel\",\r\n        backgroundColor: theme.palette.common.black,\r\n        color: theme.palette.common.white,\r\n    },\r\n    body: {\r\n        fontFamily: \"Martel\",\r\n        fontSize: 14,\r\n    },\r\n}))(TableCell);\r\n\r\nconst StyledTableRow = withStyles((theme) => ({\r\n    root: {\r\n        \"&:nth-of-type(odd)\": {\r\n            backgroundColor: theme.palette.action.hover,\r\n        },\r\n    },\r\n}))(TableRow);\r\n\r\nfunction createData(name: string, base: number, modifier: number, total: number) {\r\n    return { name, base, modifier, total };\r\n}\r\n\r\nconst rows = [\r\n    createData(\"Strength\", 12, 1, 12),\r\n    createData(\"Dexterity\", 8, -3, 5),\r\n    createData(\"Consitution\", 11, 0, 11),\r\n    createData(\"Intelligence\", 12, 0, 12),\r\n    createData(\"Wisdom\", 15, 0, 15),\r\n    createData(\"Charisma\", 14, 0, 14),\r\n    createData(\"Luck\", 11, 2, 13),\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n    table: {\r\n        minWidth: 700,\r\n    },\r\n});\r\n\r\nexport default function StatisticsBlock() {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <TableContainer component={Paper}>\r\n            <Table className={classes.table} aria-label=\"customized table\">\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <StyledTableCell>Attribute</StyledTableCell>\r\n                        <StyledTableCell align=\"right\">Base</StyledTableCell>\r\n                        <StyledTableCell align=\"right\">Modifier</StyledTableCell>\r\n                        <StyledTableCell align=\"right\">Total</StyledTableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {rows.map((row) => (\r\n                        <StyledTableRow key={row.name}>\r\n                            <StyledTableCell component=\"th\" scope=\"row\">\r\n                                {row.name}\r\n                            </StyledTableCell>\r\n                            <StyledTableCell align=\"right\">{row.base}</StyledTableCell>\r\n                            <StyledTableCell align=\"right\">{row.modifier}</StyledTableCell>\r\n                            <StyledTableCell align=\"right\">{row.total}</StyledTableCell>\r\n                        </StyledTableRow>\r\n                    ))}\r\n                </TableBody>\r\n            </Table>\r\n        </TableContainer>\r\n    );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport StatisticsBlock from \"../components/StatisticsBlock\";\r\n\r\nconst useStyles = makeStyles({\r\n    characterGrid: {\r\n        backgroundColor: \"beige\",\r\n        fontFamily: \"Martel\",\r\n        display: \"grid\",\r\n        gridTemplateColumns: \"repeat(2, 1fr)\",\r\n        gridAutoRows: \"minmax(100px, auto)\",\r\n        height: \"calc(100vh - 115px)\",\r\n    },\r\n    sectionHeading: {\r\n        fontFamily: \"MedievalSharp\",\r\n    },\r\n    bannerContainer: {\r\n        position: \"relative\",\r\n        height: \"100px\",\r\n        top: \"-80px\",\r\n    },\r\n    itemContainer: {\r\n        position: \"relative\",\r\n    },\r\n    close: {\r\n        position: \"absolute\",\r\n        left: \"20px\",\r\n        top: \"-100px\",\r\n        width: \"40px\",\r\n        filter: \"invert(42%) sepia(93%) saturate(1352%) hue-rotate(32deg) brightness(60%) contrast(119%)\",\r\n    },\r\n    portrait: {\r\n        backgroundColor: \"ivory\",\r\n        height: \"calc(60vh - 55px)\",\r\n        zIndex: 0,\r\n        border: \"solid\",\r\n        borderWidth: \"4px\",\r\n        borderColor: \"beige\",\r\n        borderRadius: \"20px\",\r\n    },\r\n    portraitImg: {\r\n        position: \"absolute\",\r\n        left: \"20%\",\r\n        width: \"40%\",\r\n        border: \"solid\",\r\n        borderRadius: \"50%\",\r\n        borderWidth: \"10px\",\r\n        borderColor: \"lightslategrey\",\r\n        margin: \"68px\",\r\n    },\r\n    portraitItem: {\r\n        position: \"absolute\",\r\n        width: \"70px\",\r\n        border: \"solid\",\r\n        borderRadius: \"50%\",\r\n        borderWidth: \"6px\",\r\n        borderColor: \"lightslategrey\",\r\n    },\r\n    portraitItemHelm: {\r\n        left: \"90px\",\r\n        top: \"35px\",\r\n    },\r\n    portraitItemBreastplate: {\r\n        left: \"90px\",\r\n        top: \"135px\",\r\n    },\r\n    portraitItemGloves: {\r\n        left: \"90px\",\r\n        top: \"235px\",\r\n    },\r\n    portraitItemLegs: {\r\n        left: \"90px\",\r\n        top: \"335px\",\r\n    },\r\n    inventory: {\r\n        backgroundColor: \"ivory\",\r\n        border: \"solid\",\r\n        borderWidth: \"4px\",\r\n        borderColor: \"beige\",\r\n        borderRadius: \"20px\",\r\n    },\r\n    inventoryGrid: {\r\n        border: \"5px solid rgb(111,41,97)\",\r\n        display: \"grid\",\r\n        gridTemplateColumns: \"repeat(6, 80px)\",\r\n        gridAutoRows: \"5em\",\r\n        inlineSize: \"500px\",\r\n        alignItems: \"center\",\r\n        margin: \"0 auto\",\r\n    },\r\n    statistics: {\r\n        overflowY: \"scroll\",\r\n        backgroundColor: \"ivory\",\r\n        gridRowEnd: \"span 2\",\r\n        border: \"solid\",\r\n        borderWidth: \"4px\",\r\n        borderColor: \"beige\",\r\n        borderRadius: \"20px\",\r\n    },\r\n    statisticsBlock: {\r\n        padding: \"40px 80px\",\r\n    },\r\n});\r\n\r\nexport function HeroProfile(props: any) {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.characterGrid}>\r\n            <div className={classes.portrait}>\r\n                <br />\r\n                <div className={classes.bannerContainer}>\r\n                    <h1 className=\"banner\">Balthazar the Unblemished</h1>\r\n                </div>\r\n                <div className={classes.itemContainer}>\r\n                    <a href=\"/#/\">\r\n                        <img src=\"images/close.svg\" className={classes.close} alt=\"close\" />\r\n                    </a>\r\n                    <img src=\"images/cleric.jpg\" className={classes.portraitImg} alt=\"profile\" />\r\n                    <img src=\"images/helm.svg\" className={`${classes.portraitItem} ${classes.portraitItemHelm}`} alt=\"helm\" />\r\n                    <img\r\n                        src=\"images/breastplate.svg\"\r\n                        className={`${classes.portraitItem} ${classes.portraitItemBreastplate}`}\r\n                        alt=\"breastplate\"\r\n                    />\r\n                    <img src=\"images/leg.svg\" className={`${classes.portraitItem} ${classes.portraitItemLegs}`} alt=\"legs\" />\r\n                    <img src=\"images/glove.svg\" className={`${classes.portraitItem} ${classes.portraitItemGloves}`} alt=\"gloves\" />\r\n                </div>\r\n            </div>\r\n            <div className={classes.statistics}>\r\n                <br />\r\n                <br />\r\n                <h1 className={classes.sectionHeading}>Statistics</h1>\r\n                <div className={classes.statisticsBlock}>\r\n                    <StatisticsBlock />\r\n                </div>\r\n                <h1 className={classes.sectionHeading}>Other</h1>\r\n                <div className={classes.statisticsBlock}>\r\n                    <p>Reputation 12</p>\r\n                    <p>Initiative 2</p>\r\n                    <p>Spell Resistance Save 14</p>\r\n                    <p>Witch Taint 12</p>\r\n                </div>\r\n                <h1 className={classes.sectionHeading}>Traits</h1>\r\n                <div className={classes.statisticsBlock}>\r\n                    <p>Blessed: A blessing from a Fae Queen, +2 Luck</p>\r\n                    <p>Lost an Arm: Lost in a fall, -3 Dexterity</p>\r\n                    <p>Lost an Eye: Spear to the head, -4 on Ranged attacks</p>\r\n                </div>\r\n            </div>\r\n            <div className={classes.inventory}>\r\n                <br />\r\n                <h1 className={classes.sectionHeading}>Party Inventory</h1>\r\n                <div className={classes.inventoryGrid}>\r\n                    <div>1</div>\r\n                    <div>2</div>\r\n                    <div>3</div>\r\n                    <div>4</div>\r\n                    <div>5</div>\r\n                    <div>6</div>\r\n                    <div>7</div>\r\n                    <div>8</div>\r\n                    <div>9</div>\r\n                    <div>10</div>\r\n                    <div>11</div>\r\n                    <div>12</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default HeroProfile;","import './App.scss';\r\nimport { HashRouter, Route, Switch } from 'react-router-dom';\r\n\r\nimport Header from \"./components/Header\";\r\nimport OverheadMap from \"./pages/OverheadMap\";\r\nimport HeroProfile from \"./pages/HeroProfile\";\r\n\r\nfunction App() {\r\n  return (\r\n      <div className=\"app\">\r\n          <Header />\r\n          <HashRouter>\r\n              <Switch>\r\n                  <Route path=\"/profile/\" component={HeroProfile} />\r\n                  <Route path=\"/\" component={OverheadMap} />\r\n              </Switch>\r\n          </HashRouter>\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}